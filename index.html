<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Submit Data to AWS API</title>
</head>
<body>

    <h1>Submit Data</h1>

    <form id="dataForm">
        <label for="ABHA_ID">ABHA ID:</label>
        <input type="text" id="ABHA_ID" name="ABHA_ID" required><br>

        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required><br>

        <label for="condition">Condition:</label>
        <input type="text" id="condition" name="condition" required><br>

        <label for="remarks">Remarks:</label>
        <input type="text" id="remarks" name="remarks" required><br>

        <button type="button" onclick="submitData()">Submit</button>
    </form>

    <script>
    async function submitData() {
        var data = {
            "httpMethod": "POST",
            "body": {
                "ABHA_ID": document.getElementById("ABHA_ID").value,
                "name": document.getElementById("name").value,
                "condition": document.getElementById("condition").value,
                "remarks": document.getElementById("remarks").value
            }
        };

        var apiUrl = 'https://ziuaijp797.execute-api.ap-south-1.amazonaws.com/Prod/'; // Replace with your AWS API endpoint URL
        var accessKey = 'AKIA2M23WTUP245PJVPJ';
        var secretKey = 'acuei8q8F3eVEt/7XrzYEStb/DhCx0ptdCj8jfl6';

        var headers = {
            'Content-Type': 'application/json',
            'X-Amz-Target': 'Your-API-Gateway-Resource',
        };

        // AWS Signature Version 4
        var awsDate = new Date().toISOString().replace(/[:\-]|\.\d{3}/g, '');
        var canonicalRequest = /* ... construct your canonical request */;
        var stringToSign = /* ... construct your string to sign */;
        var signature = /* ... calculate the signature */;

        headers['Authorization'] = `AWS4-HMAC-SHA256 Credential=${accessKey}/${awsDate.substring(0, 8)}/us-east-1/execute-api/aws4_request, SignedHeaders=content-type;x-amz-target, Signature=${signature}`;
        headers['X-Amz-Date'] = awsDate;

        try {
            var response = await fetch(apiUrl, {
                method: 'POST',
                headers: headers,
                body: JSON.stringify(data)
            });

            var responseData = await response.json();
            console.log('Success:', responseData);
            // Handle success response
        } catch (error) {
            console.error('Error:', error);
            // Handle error
        }
    }
</script>

</body>
</html>
